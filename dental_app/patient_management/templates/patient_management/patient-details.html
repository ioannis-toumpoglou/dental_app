{% extends "base.html" %}
{% load static %}
{% load widget_tweaks %}

{% block title %}
    Edit Patient
{% endblock %}

{% block css_files %}
    <link rel="stylesheet" href="{% static 'patient_management/styles.css' %}">
    <script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>
    <script src="{% static 'js/script.js' %}"></script>
{% endblock %}

{% block content %}

    <nav id="patient-detail-tabs">
      <div class="nav nav-tabs" id="nav-tab" role="tablist">
        <a href="#nav-general-info" class="nav-link active" id="nav-general-info-tab" data-bs-toggle="tab" data-bs-target="#nav-general-info" role="tab" aria-controls="nav-general-info" aria-selected="true">General Info</a>
        <a href="#nav-edit-info" class="nav-link" id="nav-edit-info-tab" data-bs-toggle="tab" data-bs-target="#nav-edit-info" role="tab" aria-controls="nav-edit-info" aria-selected="true">Edit Info</a>
        <a href="#nav-medical" class="nav-link" id="nav-medical-tab" data-bs-toggle="tab" data-bs-target="#nav-medical" role="tab" aria-controls="nav-medical" aria-selected="false">Medical History</a>
        <a href="#nav-dental" class="nav-link" id="nav-dental-tab" data-bs-toggle="tab" data-bs-target="#nav-dental" role="tab" aria-controls="nav-dental" aria-selected="false">Dental History</a>
        <a href="#nav-appointments" class="nav-link" id="nav-appointments-tab" data-bs-toggle="tab" data-bs-target="#nav-appointments" role="tab" aria-controls="nav-appointments" aria-selected="false">Appointments</a>
        <a href="#nav-odontogram" class="nav-link" id="nav-odontogram-tab" data-bs-toggle="tab" data-bs-target="#nav-odontogram" role="tab" aria-controls="nav-odontogram" aria-selected="false">Odontogram</a>
        <a href="#nav-periodontogram" class="nav-link" id="nav-periodontogram-tab" data-bs-toggle="tab" data-bs-target="#nav-periodontogram" role="tab" aria-controls="nav-periodontogram" aria-selected="false">Periodontogram</a>
        <a href="#nav-treatment-plan" class="nav-link" id="nav-treatment-plan-tab" data-bs-toggle="tab" data-bs-target="#nav-treatment-plan" role="tab" aria-controls="nav-treatment-plan" aria-selected="false">Treatment Plan</a>
        <a href="#nav-financial" class="nav-link" id="nav-financial-tab" data-bs-toggle="tab" data-bs-target="#nav-financial" role="tab" aria-controls="nav-financial" aria-selected="false">Financial</a>
        <a href="#nav-datafiles" class="nav-link" id="nav-datafiles-tab" data-bs-toggle="tab" data-bs-target="#nav-datafiles" role="tab" aria-controls="nav-datafiles" aria-selected="false">Datafiles</a>
      </div>
    </nav>
    <div class="tab-content" id="nav-tabContent">
      <div class="tab-pane fade show active" id="nav-general-info" role="tabpanel" aria-labelledby="nav-general-info-tab">
        <form class="edit-patient-form" action="" method="POST">
            {% csrf_token %}
            <div class="grid-container">
                <div class="grid-item"><p><label>Last Name:</label></p></div>
                <div class="grid-item"><p>{{ patient.last_name }}</p></div>
                <div class="grid-item"><p><label>First Name:</label></p></div>
                <div class="grid-item"><p>{{ patient.first_name }}</p></div>
                <div class="grid-item"><p><label>Address:</label></p></div>
                <div class="grid-item"><p>{{ patient.address }}</p></div>
                <div class="grid-item"><p><label>Email:</label></p></div>
                <div class="grid-item"><p>{{ patient.email }}</p></div>
                <div class="grid-item"><p><label>Phone:</label></p></div>
                <div class="grid-item"><p>{{ patient.phone }}</p></div>
                <div class="grid-item"><p><label>Mobile phone:</label></p></div>
                <div class="grid-item"><p>{{ patient.mobile_phone }}</p></div>
                <div class="grid-item"><p><label>AMKA:</label></p></div>
                <div class="grid-item"><p>{{ patient.amka }}</p></div>
                <div class="grid-item"><p><label>Date of Birth:</label></p></div>
                <div class="grid-item" id="date-of-birth-general"><p>{{ patient.date_of_birth }}</p></div>
            </div>
            <div class="add-form-button">
                <button type="button" id="new-appointment-button" class="save-button" data-bs-toggle="modal" data-bs-target="#newAppointmentModal">New Appointment</button>
                <button type="button" id="new-treatment-plan-button" class="save-button" data-bs-toggle="modal" data-bs-target="#newTreatmentPlanModal">New Treatment Plan</button>
            </div>
        </form>
      </div>
      <div class="modal fade" id="newAppointmentModal" tabindex="-1" aria-labelledby="newAppointmentModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <form class="appointments-form" action="" method="POST">
                  {% csrf_token %}
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="newAppointmentModalLabel">Add New Appointment</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div>
                        <div><label>Date:</label>&nbsp;&nbsp;{% render_field appointment_form.appointment_date type="date" placeholder="dd/mm/yyyy" %}</div>
                        <p></p>
                        <div><label>Time:</label>&nbsp;&nbsp;{% render_field appointment_form.appointment_time type="time" %}</div>
                        <p></p>
                        <div><p><label>Header:</label></p></div>
                        <div>{{ appointment_form.appointment_header }}</div>
                        <br>
                        <div><p><label>Notes:</label></p></div>
                        <div class="appointment-textarea">{{ appointment_form.notes }}</div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" name="clear-appointment">Close</button>
                        <button type="submit" id="appointment-modal-save-button" class="btn btn-primary" name="save-appointment">Save</button>
                    </div>
                  </div>
              </form>
            </div>
          </div>
      </div>
      <div class="modal fade" id="newTreatmentPlanModal" tabindex="-1" aria-labelledby="newTreatmentPlanModalLabel" aria-hidden="true">
          <div class="modal-dialog">
            <div class="modal-content">
              <form class="appointments-form" action="" method="POST">
                  {% csrf_token %}
                  <div class="modal-header">
                    <h1 class="modal-title fs-5" id="newTreatmentPlanModalLabel">Add New Treatment Plan</h1>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div>
                        <div><label>Start Date:</label>&nbsp;&nbsp;{% render_field treatment_plan_form.treatment_plan_start_date type="date" placeholder="dd/mm/yyyy" %}</div>
                        <p></p>
                        <div><p><label>Description:</label></p></div>
                        <div id="treatment-plan-description">{{ treatment_plan_form.treatment_plan_description }}</div>
                        <p></p>
                        <div><p><label>Notes:</label></p></div>
                        <div class="treatment-plan-textarea">{{ treatment_plan_form.treatment_plan_notes }}</div>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" name="clear-treatment-plan">Close</button>
                        <button type="submit" id="treatment-plan-modal-save-button" class="btn btn-primary" name="save-treatment-plan">Save</button>
                    </div>
                  </div>
              </form>
            </div>
          </div>
      </div>
      <div class="tab-pane fade" id="nav-edit-info" role="tabpanel" aria-labelledby="nav-edit-info-tab">
          <form class="edit-patient-form" action="" method="POST">
            {% csrf_token %}
            <div class="grid-container">
                <div class="grid-item"><p><label>Last Name:</label></p></div>
                <div class="grid-item"><p>{{ form.last_name }}</p></div>
                <div class="grid-item"><p><label>First Name:</label></p></div>
                <div class="grid-item"><p>{{ form.first_name }}</p></div>
                <div class="grid-item"><p><label>Address:</label></p></div>
                <div class="grid-item"><p>{{ form.address }}</p></div>
                <div class="grid-item"><p><label>Email:</label></p></div>
                <div class="grid-item"><p>{{ form.email }}</p></div>
                <div class="grid-item"><p><label>Phone:</label></p></div>
                <div class="grid-item"><p>{{ form.phone }}</p></div>
                <div class="grid-item"><p><label>Mobile phone:</label></p></div>
                <div class="grid-item"><p>{{ form.mobile_phone }}</p></div>
                <div class="grid-item"><p><label>AMKA:</label></p></div>
                <div class="grid-item"><p>{{ form.amka }}</p></div>
                <div class="grid-item"><p><label>Date of Birth:</label></p></div>
                <div class="grid-item" id="date-of-birth-edit"><p>{% render_field form.date_of_birth type="date" placeholder="dd/mm/yyyy" %}</p></div>
                <div class="grid-item"><p><label>Notes:</label></p></div>
                <div class="grid-item"><p>{{ form.notes }}</p></div>
            </div>
            <br>
            <div class="add-form-button">
                <button type="submit" name="save" class="save-button">Save</button>
                <button type="submit" name="delete" class="delete-button" onclick="return confirm('Are you sure you want to delete this patient?');">Delete</button>
            </div>
          </form>
      </div>
      <div class="tab-pane fade" id="nav-medical" role="tabpanel" aria-labelledby="nav-medical-tab">
          <form id="edit-patient-medical-form" action="" method="POST">
            {% csrf_token %}
            <table id="medical-history-table">
                <tbody>
                  {{ medical_form.as_table }}
                </tbody>
            </table>
            <br>
            <br>
            <br>
            <div class="add-form-button">
                <button type="submit" name="save-medical" class="save-button">Save</button>
                <button type="submit" name="clear-medical" class="reset-button" onclick="return confirm('Are you sure you want to clear the medical history tab?');">Reset</button>
            </div>
          </form>
      </div>
      <div class="tab-pane fade" id="nav-dental" role="tabpanel" aria-labelledby="nav-dental-tab">
          <form id="edit-patient-dental-form" action="" method="POST">
            {% csrf_token %}
            <table id="dental-history-table">
              <tbody>
                {{ dental_form.as_table }}
              </tbody>
            </table>
            <br>
            <br>
            <br>
            <div class="add-form-button">
                <button type="submit" name="save-dental" class="save-button">Save</button>
                <button type="submit" name="clear-dental" class="reset-button" onclick="return confirm('Are you sure you want to clear the dental history tab?');">Reset</button>
            </div>
          </form>
      </div>
      <div class="tab-pane fade" id="nav-appointments" role="tabpanel" aria-labelledby="nav-appointments-tab">
        {% for appointment_form in appointments_form_list %}
          <form id="appointment-form" action="" method="POST">
            {% csrf_token %}
            <div id="appointment-list">
                <input type='hidden' value='{{ appointment_form.auto_id }}' name='id'>
                <div><label>Date:</label>&nbsp;&nbsp;{{ appointment_form.appointment_date.value }}</div>
                <div><label>Time:</label>&nbsp;&nbsp;{% render_field appointment_form.appointment_time type="time" %}</div>
                <p></p>
                <div><p><label>Notes:</label></p></div>
                <div class="appointment-textarea">{{ appointment_form.notes }}</div>
            </div>
            <br>
            <div class="add-form-button">
                <button type="submit" name="edit-appointment" id="save-appointment-button">Save</button>
                <button type="submit" name="delete-appointment" id="delete-appointment-button" onclick="return confirm('Are you sure you want to delete this appointment?');">Delete</button>
            </div>
          </form>
        {% endfor %}
      </div>
      <div class="tab-pane fade" id="nav-odontogram" role="tabpanel" aria-labelledby="nav-odontogram-tab">
          <form id="odontogram-form" action="" method="POST">
            {% csrf_token %}
            <table id="odontogram-table">
                <tr>
                    <th class="tooth-number">18</th>
                    <th class="tooth-number">17</th>
                    <th class="tooth-number">16</th>
                    <th class="tooth-number">15</th>
                    <th class="tooth-number">14</th>
                    <th class="tooth-number">13</th>
                    <th class="tooth-number">12</th>
                    <th class="tooth-number">11</th>
                    <th class="tooth-number">21</th>
                    <th class="tooth-number">22</th>
                    <th class="tooth-number">23</th>
                    <th class="tooth-number">24</th>
                    <th class="tooth-number">25</th>
                    <th class="tooth-number">26</th>
                    <th class="tooth-number">27</th>
                    <th class="tooth-number">28</th>
                </tr>
                <tr>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_18.jpg' %}" id="odontogram-18" alt="odontogram-18"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_17.jpg' %}" id="odontogram-17" alt="odontogram-17"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_16.jpg' %}" id="odontogram-16" alt="odontogram-16"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_15.jpg' %}" id="odontogram-15" alt="odontogram-15"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_14.jpg' %}" id="odontogram-14" alt="odontogram-14"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_13.jpg' %}" id="odontogram-13" alt="odontogram-13"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_12.jpg' %}" id="odontogram-12" alt="odontogram-12"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_11.jpg' %}" id="odontogram-11" alt="odontogram-11"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_21.jpg' %}" id="odontogram-21" alt="odontogram-21"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_22.jpg' %}" id="odontogram-22" alt="odontogram-22"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_23.jpg' %}" id="odontogram-23" alt="odontogram-23"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_24.jpg' %}" id="odontogram-24" alt="odontogram-24"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_25.jpg' %}" id="odontogram-25" alt="odontogram-25"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_26.jpg' %}" id="odontogram-26" alt="odontogram-26"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_27.jpg' %}" id="odontogram-27" alt="odontogram-27"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_28.jpg' %}" id="odontogram-28" alt="odontogram-28"></td>
                </tr>
                <tr>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_18_top_view.jpg' %}" id="odontogram-18-top-view" alt="odontogram-18-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_17_top_view.jpg' %}" id="odontogram-17-top-view" alt="odontogram-17-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_16_top_view.jpg' %}" id="odontogram-16-top-view" alt="odontogram-16-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_15_top_view.jpg' %}" id="odontogram-15-top-view" alt="odontogram-15-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_14_top_view.jpg' %}" id="odontogram-14-top-view" alt="odontogram-14-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_13_top_view.jpg' %}" id="odontogram-13-top-view" alt="odontogram-13-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_12_top_view.jpg' %}" id="odontogram-12-top-view" alt="odontogram-12-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_11_top_view.jpg' %}" id="odontogram-11-top-view" alt="odontogram-11-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_21_top_view.jpg' %}" id="odontogram-21-top-view" alt="odontogram-21-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_22_top_view.jpg' %}" id="odontogram-22-top-view" alt="odontogram-22-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_23_top_view.jpg' %}" id="odontogram-23-top-view" alt="odontogram-23-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_24_top_view.jpg' %}" id="odontogram-24-top-view" alt="odontogram-24-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_25_top_view.jpg' %}" id="odontogram-25-top-view" alt="odontogram-25-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_26_top_view.jpg' %}" id="odontogram-26-top-view" alt="odontogram-26-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_27_top_view.jpg' %}" id="odontogram-27-top-view" alt="odontogram-27-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_28_top_view.jpg' %}" id="odontogram-28-top-view" alt="odontogram-28-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                </tr>
                <tr>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_48_top_view.jpg' %}" id="odontogram-48-top-view" alt="odontogram-48-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_47_top_view.jpg' %}" id="odontogram-47-top-view" alt="odontogram-47-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_46_top_view.jpg' %}" id="odontogram-46-top-view" alt="odontogram-46-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_45_top_view.jpg' %}" id="odontogram-45-top-view" alt="odontogram-45-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_44_top_view.jpg' %}" id="odontogram-44-top-view" alt="odontogram-44-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_43_top_view.jpg' %}" id="odontogram-43-top-view" alt="odontogram-43-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_42_top_view.jpg' %}" id="odontogram-42-top-view" alt="odontogram-42-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_41_top_view.jpg' %}" id="odontogram-41-top-view" alt="odontogram-41-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_31_top_view.jpg' %}" id="odontogram-31-top-view" alt="odontogram-31-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_32_top_view.jpg' %}" id="odontogram-32-top-view" alt="odontogram-32-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_33_top_view.jpg' %}" id="odontogram-33-top-view" alt="odontogram-33-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalAnterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_34_top_view.jpg' %}" id="odontogram-34-top-view" alt="odontogram-34-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_35_top_view.jpg' %}" id="odontogram-35-top-view" alt="odontogram-35-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_36_top_view.jpg' %}" id="odontogram-36-top-view" alt="odontogram-36-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_37_top_view.jpg' %}" id="odontogram-37-top-view" alt="odontogram-37-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                    <td class="tooth-image-top-view"><img src="{% static 'images/dental/odontogram_38_top_view.jpg' %}" id="odontogram-38-top-view" alt="odontogram-38-top-view" data-bs-toggle="modal" data-bs-target="#odontogramTopViewModalPosterior"></td>
                </tr>
                <tr>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_48.jpg' %}" id="odontogram-48" alt="odontogram-48"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_47.jpg' %}" id="odontogram-47" alt="odontogram-47"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_46.jpg' %}" id="odontogram-46" alt="odontogram-46"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_45.jpg' %}" id="odontogram-45" alt="odontogram-45"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_44.jpg' %}" id="odontogram-44" alt="odontogram-44"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_43.jpg' %}" id="odontogram-43" alt="odontogram-43"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_42.jpg' %}" id="odontogram-42" alt="odontogram-42"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_41.jpg' %}" id="odontogram-41" alt="odontogram-41"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_31.jpg' %}" id="odontogram-31" alt="odontogram-31"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_32.jpg' %}" id="odontogram-32" alt="odontogram-32"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_33.jpg' %}" id="odontogram-33" alt="odontogram-33"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_34.jpg' %}" id="odontogram-34" alt="odontogram-34"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_35.jpg' %}" id="odontogram-35" alt="odontogram-35"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_36.jpg' %}" id="odontogram-36" alt="odontogram-36"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_37.jpg' %}" id="odontogram-37" alt="odontogram-37"></td>
                    <td class="tooth-image"><img src="{% static 'images/dental/odontogram_38.jpg' %}" id="odontogram-38" alt="odontogram-38"></td>
                </tr>
                <tr>
                    <th class="tooth-number">48</th>
                    <th class="tooth-number">47</th>
                    <th class="tooth-number">46</th>
                    <th class="tooth-number">45</th>
                    <th class="tooth-number">44</th>
                    <th class="tooth-number">43</th>
                    <th class="tooth-number">42</th>
                    <th class="tooth-number">41</th>
                    <th class="tooth-number">31</th>
                    <th class="tooth-number">32</th>
                    <th class="tooth-number">33</th>
                    <th class="tooth-number">34</th>
                    <th class="tooth-number">35</th>
                    <th class="tooth-number">36</th>
                    <th class="tooth-number">37</th>
                    <th class="tooth-number">38</th>
                </tr>
            </table>
          </form>
          <div class="modal fade" id="odontogramTopViewModalPosterior" tabindex="-1" aria-labelledby="odontogramTopViewModalPosteriorLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form class="appointments-form" id="odontogram-top-view-form" action="" method="POST">
                      {% csrf_token %}
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="odontogramTopViewModalPosteriorLabel">Odontogram Top View</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <div class="odontogram-images">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered.jpg' %}" class="odontogram-top-view-image">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_1_black.png' %}" id="odontogram-outer-top-view-image-1-black">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_1_brown.png' %}" id="odontogram-outer-top-view-image-1-brown">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_1_yellow.png' %}" id="odontogram-outer-top-view-image-1-yellow">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_2_black.png' %}" id="odontogram-outer-top-view-image-2-black">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_2_brown.png' %}" id="odontogram-outer-top-view-image-2-brown">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_2_yellow.png' %}" id="odontogram-outer-top-view-image-2-yellow">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_3_black.png' %}" id="odontogram-outer-top-view-image-3-black">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_3_brown.png' %}" id="odontogram-outer-top-view-image-3-brown">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_3_yellow.png' %}" id="odontogram-outer-top-view-image-3-yellow">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_4_black.png' %}" id="odontogram-outer-top-view-image-4-black">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_4_brown.png' %}" id="odontogram-outer-top-view-image-4-brown">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_4_yellow.png' %}" id="odontogram-outer-top-view-image-4-yellow">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_5_black.png' %}" id="odontogram-outer-top-view-image-5-black">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_5_brown.png' %}" id="odontogram-outer-top-view-image-5-brown">
                            <img src="{% static 'images/dental/odontogram_outer_top_view_numbered_5_yellow.png' %}" id="odontogram-outer-top-view-image-5-yellow">
                          </div>
                          <div class="odontogram-selectors">
                              <div class="odontogram-top-view-section-selector">
                                  Choose section:
                                   <select id="odontogram-outer-top-view-selection" onchange="clearOdontogramColor()">
                                       <option value="" class="odontogram-top-view-section-option-0"></option>
                                       <option value="1" class="odontogram-top-view-section-option-1">1</option>
                                       <option value="2" class="odontogram-top-view-section-option-2">2</option>
                                       <option value="3" class="odontogram-top-view-section-option-3">3</option>
                                       <option value="4" class="odontogram-top-view-section-option-4">4</option>
                                       <option value="5" class="odontogram-top-view-section-option-5">5</option>
                                   </select>
                              </div>
                              <p>
                              <div class="odontogram-top-view-color-selector">
                                  Choose color:
                                  &nbsp;&nbsp;
                                   <select id="odontogram-outer-color-options" onchange="selectOdontogramColor()">
                                       <option value="" class="odontogram-top-view-color-option-0"></option>
                                       <option value="black" class="odontogram-top-view-color-option-1">■</option>
                                       <option value="brown" class="odontogram-top-view-color-option-2">■</option>
                                       <option value="yellow" class="odontogram-top-view-color-option-3">■</option>
                                   </select>
                              </div>
                              </p>
                          </div>
                      </div>
                      <div class="modal-footer">
                          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" name="odontogram-top-view-cancel" onclick="clearOuterTopViewModalData()">Cancel</button>
                          <button type="submit" class="odontogram-top-view-save-button btn btn-primary" name="save-odontogram-top-view">Save</button>
                      </div>
                  </form>
                </div>
              </div>
          </div>
          <div class="modal fade" id="odontogramTopViewModalAnterior" tabindex="-1" aria-labelledby="odontogramTopViewModalAnteriorLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form class="appointments-form" action="" method="POST">
                      {% csrf_token %}
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="odontogramTopViewModalAnteriorLabel">Odontogram Top View</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                          <img src="{% static 'images/dental/odontogram_inner_top_view_numbered.jpg' %}" class="odontogram-top-view-image">
                          <div class="odontogram-selectors">
                              <div class="odontogram-top-view-section-selector">
                                  Choose section:
                                   <select>
                                       <option value="1" class="odontogram-top-view-section-option-1">1</option>
                                       <option value="2" class="odontogram-top-view-section-option-2">2</option>
                                       <option value="3" class="odontogram-top-view-section-option-3">3</option>
                                       <option value="4" class="odontogram-top-view-section-option-4">4</option>
                                       <option value="5" class="odontogram-top-view-section-option-5">5</option>
                                   </select>
                              </div>
                              <p>
                              <div class="odontogram-top-view-color-selector">
                                  Choose color:
                                   <select class="color-options">
                                       <option value="" class="odontogram-top-view-color-option-0"></option>
                                       <option value="black" class="odontogram-top-view-color-option-1">■</option>
                                       <option value="brown" class="odontogram-top-view-color-option-2">■</option>
                                       <option value="yellow" class="odontogram-top-view-color-option-3">■</option>
                                   </select>
                              </div>
                              </p>
                          </div>
                          <div class="modal-footer">
                              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" name="odontogram-top-view-cancel">Cancel</button>
                              <button type="submit" class="odontogram-top-view-save-button" class="btn btn-primary" name="save-odontogram-top-view">Save</button>
                          </div>
                      </div>
                  </form>
                </div>
              </div>
          </div>
      </div>
      <div class="tab-pane fade" id="nav-periodontogram" role="tabpanel" aria-labelledby="nav-periodontogram-tab">
          <form id="periodontogram-form" action="" method="POST">
            {% csrf_token %}
            <img src="{% static 'images/periodontogram.png' %}" id="periodontogram" alt="periodontogram">
          </form>
      </div>
      <div class="tab-pane fade" id="nav-treatment-plan" role="tabpanel" aria-labelledby="nav-treatment-plan-tab">
          {% for treatment_plan_form in treatment_plan_form_list %}
          <form id="treatment-plan-form" action="" method="POST">
            {% csrf_token %}
            <div id="treatment-plan-list">
                <input type='hidden' value='{{ treatment_plan_form.auto_id }}' name='id'>
                <div>
                    <label>Description:</label>&nbsp;&nbsp;{{ treatment_plan_form.treatment_plan_description }}
                    <button type="button" id="financial-button" class="save-button" data-bs-toggle="modal" data-bs-target="#modal_{{ treatment_plan_form.auto_id }}">Financial</button>
                </div>
                <p></p>
                <div>
                    <label>Total Cost:</label>&nbsp;&nbsp;&nbsp;&nbsp;{{ treatment_plan_form.total_cost }} €
                </div>
                <p></p>
                <div>
                    <label>Start Date:</label>&nbsp;&nbsp;&nbsp;&nbsp;{% render_field treatment_plan_form.treatment_plan_start_date type="date" placeholder="dd/mm/yyyy" %}
                    &nbsp;&nbsp;&nbsp;
                    <label>End Date:</label>&nbsp;&nbsp;&nbsp;&nbsp;{% render_field treatment_plan_form.treatment_plan_end_date type="date" placeholder="dd/mm/yyyy" %}
                </div>
                <p></p>
                <div>
                    <p><label>Notes:</label></p>
                </div>
                <div class="treatment-plan-textarea">{{ treatment_plan_form.treatment_plan_notes }}</div>
            </div>
            <div class="add-form-button">
                <button type="submit" name="edit-treatment-plan" id="save-treatment-plan-button">Save</button>
                <button type="submit" name="delete-treatment-plan" id="delete-treatment-plan-button" onclick="return confirm('Are you sure you want to delete this treatment plan?');">Delete</button>
            </div>
          </form>
          <div class="modal fade" id="modal_{{ treatment_plan_form.auto_id }}" tabindex="-1" aria-labelledby="newAppointmentModalLabel" aria-hidden="true">
              <div class="modal-dialog">
                <div class="modal-content">
                  <form class="appointments-form" action="" method="POST">
                      {% csrf_token %}
                      <div class="modal-header">
                        <h1 class="modal-title fs-5" id="financialModalLabel">Financial Transactions</h1>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                      </div>
                      <div class="modal-body">
                        <table id="financial-table">
                            <thead>
                                <tr>
                                    <th id="transaction-id">Transaction ID</th>
                                    <th id="transaction-header">Transaction Amount</th>
                                    <th id="transaction-date-header">Transaction Date</th>
                                    <th></th>
                                </tr>
                            </thead>
                            {% for treatment_plan_id in financial_form_lists %}
                            {% if treatment_plan_id == treatment_plan_form.auto_id %}
                            {% for financial_form in financial_form_lists|get_item:treatment_plan_id %}

                            <tr>
                                <td> {{ financial_form.auto_id }} </td>
                                <td> {{ financial_form.transaction_amount }} € </td>
                                <td> {% render_field financial_form.transaction_date type="date" placeholder="dd/mm/yyyy" %} </td>
                                <td>
                                    <form action="" method="POST">
                                        {% csrf_token %}
                                        <a href="{% url 'delete-financial' financial_form.auto_id %}" onclick="return confirm('Are you sure you want to delete this transaction?');"> x </a>
                                    </form>
                                </td>
                            </tr>

                            {% endfor %}
                            {% endif %}
                            {% endfor %}
                        </table>
                        <div id="treatment_plan_balance">
                            {% if treatment_plan_form.treatment_plan_balance.value %}
                            Balance: {{ treatment_plan_form.treatment_plan_balance.value }} €
                            {% else %}
                            Balance: 0.0 €
                            {% endif %}
                        </div>
                        <hr>
                        <div>
                            {% if treatment_plan_form.treatment_plan_balance.value == 0 %}
                                <div class="alert alert-dismissible alert-success">
                                    <strong>All has been taken care of :)</strong>
                                </div>
                            {% else %}
                                <h5>Add new transaction</h5>
                                <input type='hidden' value='{{ treatment_plan_form.auto_id }}' name='id'>
                                <div><label>Date:</label>&nbsp;&nbsp;{% render_field financial_form.transaction_date type="date" placeholder="dd/mm/yyyy" %}</div>
                                <p></p>
                                <div><label>Amount:</label>&nbsp;&nbsp;{% render_field financial_form.transaction_amount %}</div>
                                <br>
                                <div class="modal-footer">
                                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" name="clear-financial">Close</button>
                                    <button type="submit" id="financial-modal-save-button" class="btn btn-primary" name="save-financial">Save</button>
                                </div>
                            {% endif %}
                        </div>
                        <br>
                      </div>
                  </form>
                </div>
               </div>
           </div>
          {% endfor %}
      </div>
      <div class="tab-pane fade" id="nav-financial" role="tabpanel" aria-labelledby="nav-financial-tab">
          <form id="financial-form" action="" method="POST">
            {% csrf_token %}

          </form>
      </div>
      <div class="tab-pane fade" id="nav-datafiles" role="tabpanel" aria-labelledby="nav-datafiles-tab">
          <form id="datafiles-form" action="" method="POST" enctype="multipart/form-data">
            {% csrf_token %}
            <table id="datafile-table">
                <thead>
                    <tr>
                        <th id="file-name-header">File Name</th>
                        <th id="file-date-header">Created</th>
                        <th id="file-size-header">Size</th>
                    </tr>
                </thead>
                {% for file in datafiles %}
                <tr>
                    <td> <a href="{% static 'patient_data/' %}{{ file.path }}" target="_blank">{{ file.filename }}</a> </td>
                    <td> {{ file.created }} </td>
                    <td> {{ file.size }} MB</td>
                </tr>
                {% endfor %}
            </table>
            <div id="upload-form">
                <label id="upload-form-label">Select files:</label>
                <br>
                <input type="file" name="files" id="upload-file-search" multiple>
                <input type="submit" name="file-upload" value="Upload">
            </div>
          </form>
      </div>
    </div>

{% endblock %}